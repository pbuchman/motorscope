name: PR AI explainer (React beginner-friendly)

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  contents: read
  pull-requests: write

jobs:
  comment-summary:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout (needed for diff context)
        uses: actions/checkout@v4

      - name: Post beginner-friendly PR explanation
        uses: ai-action/pull-request-summary@v1
        with:
          # uses GITHUB_TOKEN by default, but let's be explicit
          token: ${{ secrets.GITHUB_TOKEN }}
          # optional: customize the model if/when the action supports more choices
          # model: codellama
          prompt: |
            You are an assistant writing a PR explanation for someone new to React but experienced in software engineering.

            Write a concise, friendly explanation of this pull request.

            Cover:
            1. What changed:
               - List key files and React components.
               - For each, describe the change in plain language (no buzzwords).
            2. Why the change was needed:
               - Briefly describe the business / bug context.
               - Make clear what problem this PR solves.
            3. Major architectural or state-management updates:
               - Mention important React patterns (hooks, context, lifting state, custom hooks, etc.).
               - Explain them in simple terms and clarify any acronyms.
            4. Language- and style-specific improvements:
               - If some changes are mainly about using more idiomatic JavaScript/TypeScript or React patterns,
                 explain why this is a better approach (e.g. readability, safety, performance, testability, or convention).
               - Call out when something is a “style / best practice” change rather than a functional fix.

            Assume:
            - Most of the code in this PR was initially generated by AI.
            - A human developer is reading the explanation to build a mental model of the changes.

            Output format:
            - Start with a short 2–3 sentence overview paragraph.
            - Then use clear sections with headings like:
              - "What changed"
              - "Why it was needed"
              - "React & state-management details"
              - "Why this approach is better"
            - Use bullet lists where helpful.
            - Avoid jargon and explain any non-trivial concepts as if to a junior dev.
            - Keep it practical and focused on how the reviewer should think about this code in the future.