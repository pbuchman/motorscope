# =============================================================================
# MotorScope API - Environment Variables
# =============================================================================
#
# Copy this file to .env for local development:
#   cp .env.example .env
#
# Then fill in the required values below.
#
# NOTE: This file is loaded by dotenv in development mode only.
#       In production (Cloud Run), set these via the Cloud Run console.
#
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------

# Application environment mode
# Values: "development" | "production"
NODE_ENV=development

# Server port (Cloud Run sets this automatically in production)
# PORT=8080

# -----------------------------------------------------------------------------
# GCP Configuration
# -----------------------------------------------------------------------------

# Google Cloud Project ID
# This project must have Firestore enabled
GCP_PROJECT_ID=motorscope

# -----------------------------------------------------------------------------
# Authentication (REQUIRED)
# -----------------------------------------------------------------------------

# JWT Secret for signing authentication tokens
# Generate a secure secret with: openssl rand -base64 32
# ⚠️  REQUIRED: The API will not start without this in production
JWT_SECRET=

# Google OAuth 2.0 Client ID
# Get this from GCP Console > APIs & Services > Credentials
# Create an OAuth 2.0 Client ID of type "Web application"
OAUTH_CLIENT_ID=663051224718-nj03sld1761g1oicnngk1umj0ob717qe.apps.googleusercontent.com

# -----------------------------------------------------------------------------
# CORS Configuration (REQUIRED for extension)
# -----------------------------------------------------------------------------

# Chrome extension origin for CORS whitelist
# Format: chrome-extension://<extension-id>
#
# To find your extension ID:
#   1. Load the extension in Chrome (chrome://extensions)
#   2. Enable "Developer mode"
#   3. Copy the ID shown under your extension
#
# For development with unpacked extension, the ID changes on reload.
# For published extensions, the ID is permanent.
ALLOWED_ORIGIN_EXTENSION=chrome-extension://your-extension-id-here

# -----------------------------------------------------------------------------
# Optional Configuration
# -----------------------------------------------------------------------------

# Backend base URL (for self-reference in API responses)
# Usually not needed - Cloud Run provides this automatically
# BACKEND_BASE_URL=http://localhost:8080/api


# =============================================================================
# FIRESTORE CONNECTION - LOCAL DEVELOPMENT
# =============================================================================
#
# The API connects to Firestore using Application Default Credentials (ADC).
# This means you DON'T set credentials in environment variables - instead,
# you authenticate using the gcloud CLI.
#
# STEP-BY-STEP SETUP:
#
# 1. Install Google Cloud CLI (if not already installed):
#    https://cloud.google.com/sdk/docs/install
#
# 2. Login to your Google account:
#    gcloud auth login
#
# 3. Set your project:
#    gcloud config set project motorscope
#
# 4. Set up Application Default Credentials (ADC):
#    gcloud auth application-default login
#
#    This opens a browser for you to authenticate. After completion,
#    credentials are saved locally at:
#    - macOS/Linux: ~/.config/gcloud/application_default_credentials.json
#    - Windows: %APPDATA%\gcloud\application_default_credentials.json
#
# 5. Verify your setup:
#    gcloud auth application-default print-access-token
#
#    If this prints a token, you're good to go!
#
# 6. Start the API:
#    npm run dev
#
# 7. Test Firestore connection:
#    curl http://localhost:8080/api/healthz
#
#    Should return: {"status":"ok","firestore":"ok",...}
#
# -----------------------------------------------------------------------------
# TROUBLESHOOTING
# -----------------------------------------------------------------------------
#
# Error: "Could not load the default credentials"
#   → Run: gcloud auth application-default login
#
# Error: "Permission denied" or "PERMISSION_DENIED"
#   → Your account needs Firestore access. Run:
#     gcloud projects add-iam-policy-binding motorscope \
#       --member="user:your-email@example.com" \
#       --role="roles/datastore.user"
#
# Error: "NOT_FOUND" or "Database not found"
#   → Firestore database doesn't exist. Create it:
#     1. Go to https://console.cloud.google.com/firestore
#     2. Select project "motorscope"
#     3. Create database in Native mode
#     4. Database ID: "motorscopedb"
#     5. Location: "europe-west1"
#
# Error: "Invalid project ID"
#   → Check GCP_PROJECT_ID matches your actual project
#
# To see which account is active:
#    gcloud auth list
#
# To switch accounts:
#    gcloud config set account your-email@example.com
#
# =============================================================================

