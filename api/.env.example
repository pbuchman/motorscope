# =============================================================================
# MotorScope API - Environment Variables
# =============================================================================
#
# SETUP:
#   cp .env.example .env
#   # Then edit .env and fill in the values below
#
# This file is loaded by dotenv for local development only.
# In production (Cloud Run), set environment variables in the service config.
#
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------

# Application environment: "development" or "production"
NODE_ENV=development

# Server port (Cloud Run sets PORT automatically in production)
# PORT=8080

# -----------------------------------------------------------------------------
# GCP Configuration
# -----------------------------------------------------------------------------

# Google Cloud Project ID (must have Firestore enabled)
GCP_PROJECT_ID=motorscope

# Google Cloud Storage bucket name for images
GCS_BUCKET_NAME=motorscope-images

# -----------------------------------------------------------------------------
# Authentication (REQUIRED)
# -----------------------------------------------------------------------------

# JWT Secret for signing authentication tokens
# Generate with: openssl rand -base64 32
# ⚠️  REQUIRED - API will fail to start without this
JWT_SECRET=

# Google OAuth 2.0 Client ID
# Get from: GCP Console → APIs & Services → Credentials
# Use the "Chrome extension" type OAuth client
OAUTH_CLIENT_ID=your-client-id-here

# -----------------------------------------------------------------------------
# CORS (REQUIRED for extension)
# -----------------------------------------------------------------------------

# Chrome extension origin for CORS whitelist
# Format: chrome-extension://<extension-id>
#
# To find your extension ID:
#   1. Go to chrome://extensions
#   2. Enable "Developer mode"
#   3. Load unpacked extension (extension/dist folder)
#   4. Copy the ID shown under your extension
ALLOWED_ORIGIN_EXTENSION=chrome-extension://your-extension-id-here

# -----------------------------------------------------------------------------
# Optional
# -----------------------------------------------------------------------------

# Backend base URL (usually not needed - for self-reference in responses)
# BACKEND_BASE_URL=http://localhost:8080/api


# =============================================================================
# FIRESTORE CONNECTION (Local Development)
# =============================================================================
#
# The API uses Application Default Credentials (ADC) - you don't set
# credentials in env vars. Instead, authenticate with gcloud CLI:
#
#   # 1. Login to GCP
#   gcloud auth login
#
#   # 2. Set project
#   gcloud config set project motorscope
#
#   # 3. Set up ADC (this creates local credentials)
#   gcloud auth application-default login
#
#   # 4. Verify setup
#   gcloud auth application-default print-access-token
#
#   # 5. Start API
#   npm run dev
#
#   # 6. Test connection
#   curl http://localhost:8080/api/healthz
#   # Should return: {"status":"ok","firestore":"ok",...}
#
# TROUBLESHOOTING:
#
#   "Could not load the default credentials"
#   → Run: gcloud auth application-default login
#
#   "Permission denied"
#   → Your account needs Firestore access:
#     gcloud projects add-iam-policy-binding motorscope \
#       --member="user:your-email@example.com" \
#       --role="roles/datastore.user"
#
#   "Database not found"
#   → Create Firestore database:
#     1. Go to console.cloud.google.com/firestore
#     2. Create database in Native mode
#     3. Database ID: "motorscopedb"
#     4. Location: "europe-west1"
#
# =============================================================================

